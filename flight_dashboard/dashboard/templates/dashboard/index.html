{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Dashboard</title>
    
    <!-- Leaflet CSS from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
    <link rel="stylesheet" href="{% static 'dashboard/css/style.css' %}">
</head>
	<script>
document.addEventListener('DOMContentLoaded', function() {
    const videos = document.querySelectorAll('video');
    
    videos.forEach(video => {
        // Handle successful loading
        video.addEventListener('loadeddata', function() {
            this.setAttribute('data-loaded', 'true');
        });

        // Handle errors
        video.addEventListener('error', function(e) {
            console.error('Video Error:', e);
            this.style.backgroundColor = '#000';
        });

        // Force reload if initial load fails
        setTimeout(() => {
            if (!video.readyState) {
                video.load();
            }
        }, 1000);
    });
});
	</script>

<body>
	<div class="container">
		<!-- Map Section -->
		<div class="map-container">
			<div id="map"></div>
			<div class="map-overlay">
				<div class="radius-legend">
					<h3>Distance from Center</h3>
					<div class="legend-item">
						<span class="circle circle-15"></span>
						<span>15 km</span>
					</div>
					<div class="legend-item">
						<span class="circle circle-30"></span>
						<span>30 km</span>
					</div>
					<div class="legend-item">
						<span class="circle circle-45"></span>
						<span>45 km</span>
					</div>
					<div class="legend-item">
						<span class="circle circle-60"></span>
						<span>60 km</span>
					</div>
				</div>
			</div>
		</div>

		<!-- Right Panel -->
		<div class="right-panel">
				<div class="video-container">
    <h2>Camera Feed 1</h2>
    <video 
        autoplay 
        loop 
        muted 
        playsinline 
        class="video-feed" 
        id="video1"
        poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect width='100' height='100' fill='%23000'/%3E%3C/svg%3E"
    >
        <source src="{% static 'dashboard/media/left_vid.mp4' %}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>

<div class="video-container">
    <h2>Camera Feed 2</h2>
    <video 
        autoplay 
        loop 
        muted 
        playsinline 
        class="video-feed" 
        id="video2"
        poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect width='100' height='100' fill='%23000'/%3E%3C/svg%3E"
    >
        <source src="{% static 'dashboard/media/right_vid.mp4' %}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
			<!-- Flight Information Panel -->
			<div class="info-panel">
				<h2>Flight Information</h2>
				<div id="flight-info">
					<p class="default-message">Click a marker to display information</p>
				</div>
				<div id="weather-info" class="weather-container hidden">
					<h3>Weather Information</h3>
					<div class="weather-data"></div>
				</div>
			</div>
		</div>
	</div>

	<!-- Leaflet JS -->
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
	<script src="{% static 'dashboard/js/map.js' %}"></script>
</body>

</html>
